ENTRY(_start)
INPUT(builtin.o ../../core/builtin.o ../../fs/builtin.o ../../dev/builtin.o ../../sys/builtin.o ../../mm/builtin.o ../../net/builtin.o)
OUTPUT(kernel.elf)

SECTIONS {

    LMA = 0x80010000;
    . = LMA;

    .boot.text : ALIGN(0x1000) {
        *boot*.o(.text*)
        *boot*.o(.rodata*)
    }

    .boot.data : ALIGN(0x1000) {
        *boot*.o(.data)
    }

    .boot.bss (NOLOAD) : ALIGN(0x1000) {
        *boot*.o(*)
    }

    boot_end = .;

    _VMA = .;

    .text : AT(ADDR(.text) - _VMA) ALIGN(0x1000) {
        *(.text*)
        *(.rodata*)
    }

    .__minit : AT(ADDR(.__minit) - _VMA) ALIGN(0x1000) {
        __minit = .;
        *(.__minit*)
        __minit_end = .;
    }
    
    .data : AT(ADDR(.data) - _VMA) ALIGN(0x1000) {
        *(.data)
    }
    
    .bss : AT(ADDR(.bss) - _VMA) ALIGN(0x1000) {
        *(.bss)
    }
    
    /DISCARD/ : {
        *(.*)
    }
    
    kernel_end = . - _VMA;
}
